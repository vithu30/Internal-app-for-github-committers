<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Formatters.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"> -->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<!-- <input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>
 -->
<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="TacoTable.html">TacoTable</a><ul class='methods'><li data-type='method'><a href="TacoTable.html#componentWillReceiveProps">componentWillReceiveProps</a></li><li data-type='method'><a href="TacoTable.html#handleColumnHighlight">handleColumnHighlight</a></li><li data-type='method'><a href="TacoTable.html#handleHeaderClick">handleHeaderClick</a></li><li data-type='method'><a href="TacoTable.html#handleRowHighlight">handleRowHighlight</a></li><li data-type='method'><a href="TacoTable.html#render">render</a></li><li data-type='method'><a href="TacoTable.html#renderBottomData">renderBottomData</a></li><li data-type='method'><a href="TacoTable.html#renderGroupHeaders">renderGroupHeaders</a></li><li data-type='method'><a href="TacoTable.html#renderHeaders">renderHeaders</a></li><li data-type='method'><a href="TacoTable.html#renderRows">renderRows</a></li><li data-type='method'><a href="TacoTable.html#sort">sort</a></li><li data-type='method'><a href="TacoTable.html#summarizeColumns">summarizeColumns</a></li></ul></li><li><a href="TacoTableCell.html">TacoTableCell</a><ul class='methods'><li data-type='method'><a href="TacoTableCell.html#computeTdClassName">computeTdClassName</a></li><li data-type='method'><a href="TacoTableCell.html#computeTdStyle">computeTdStyle</a></li><li data-type='method'><a href="TacoTableCell.html#computeWithPlugins">computeWithPlugins</a></li><li data-type='method'><a href="TacoTableCell.html#handleMouseEnter">handleMouseEnter</a></li><li data-type='method'><a href="TacoTableCell.html#handleMouseLeave">handleMouseLeave</a></li><li data-type='method'><a href="TacoTableCell.html#render">render</a></li></ul></li><li><a href="TacoTableHeader.html">TacoTableHeader</a><ul class='methods'><li data-type='method'><a href="TacoTableHeader.html#handleClick">handleClick</a></li><li data-type='method'><a href="TacoTableHeader.html#render">render</a></li></ul></li><li><a href="TacoTableRow.html">TacoTableRow</a><ul class='methods'><li data-type='method'><a href="TacoTableRow.html#handleClick">handleClick</a></li><li data-type='method'><a href="TacoTableRow.html#handleDoubleClick">handleDoubleClick</a></li><li data-type='method'><a href="TacoTableRow.html#handleMouseEnter">handleMouseEnter</a></li><li data-type='method'><a href="TacoTableRow.html#handleMouseLeave">handleMouseLeave</a></li><li data-type='method'><a href="TacoTableRow.html#render">render</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-DataType.html">DataType</a></li><li><a href="module-Formatters.html">Formatters</a><ul class='methods'><li data-type='method'><a href="module-Formatters.html#.atMostDecFormat">atMostDecFormat</a></li><li data-type='method'><a href="module-Formatters.html#.commaFormat">commaFormat</a></li><li data-type='method'><a href="module-Formatters.html#.decFormat">decFormat</a></li><li data-type='method'><a href="module-Formatters.html#.decPercentFormat">decPercentFormat</a></li><li data-type='method'><a href="module-Formatters.html#.makePercent">makePercent</a></li><li data-type='method'><a href="module-Formatters.html#.makePlusMinus">makePlusMinus</a></li><li data-type='method'><a href="module-Formatters.html#.moneyFormat">moneyFormat</a></li><li data-type='method'><a href="module-Formatters.html#.percentFormat">percentFormat</a></li><li data-type='method'><a href="module-Formatters.html#.plusMinusFormat">plusMinusFormat</a></li><li data-type='method'><a href="module-Formatters.html#.safeFormat">safeFormat</a></li><li data-type='method'><a href="module-Formatters.html#.seFormat">seFormat</a></li><li data-type='method'><a href="module-Formatters.html#.zeroAsNull">zeroAsNull</a></li></ul></li><li><a href="module-plugins_HeatmapPlugin.html">plugins/HeatmapPlugin</a><ul class='methods'><li data-type='method'><a href="module-plugins_HeatmapPlugin.html#~columnTest">columnTest</a></li><li data-type='method'><a href="module-plugins_HeatmapPlugin.html#~tdStyle">tdStyle</a></li></ul></li><li><a href="module-plugins_HighlightOnly.html">plugins/HighlightOnly</a><ul class='methods'><li data-type='method'><a href="module-plugins_HighlightOnly.html#~HighlightOnly">HighlightOnly</a></li></ul></li><li><a href="module-SortDirection.html">SortDirection</a></li><li><a href="module-Summarizers.html">Summarizers</a><ul class='methods'><li data-type='method'><a href="module-Summarizers.html#.frequencySummarizer">frequencySummarizer</a></li><li data-type='method'><a href="module-Summarizers.html#.meanSummarizer">meanSummarizer</a></li><li data-type='method'><a href="module-Summarizers.html#.minMaxSummarizer">minMaxSummarizer</a></li></ul></li><li><a href="module-TdClassNames.html">TdClassNames</a><ul class='methods'><li data-type='method'><a href="module-TdClassNames.html#.maxClassName">maxClassName</a></li><li data-type='method'><a href="module-TdClassNames.html#.minClassName">minClassName</a></li><li data-type='method'><a href="module-TdClassNames.html#.minMaxClassName">minMaxClassName</a></li></ul></li><li><a href="module-Utils.html">Utils</a><ul class='methods'><li data-type='method'><a href="module-Utils.html#.getCellData">getCellData</a></li><li data-type='method'><a href="module-Utils.html#.getColumnById">getColumnById</a></li><li data-type='method'><a href="module-Utils.html#.getSortComparator">getSortComparator</a></li><li data-type='method'><a href="module-Utils.html#.getSortValue">getSortValue</a></li><li data-type='method'><a href="module-Utils.html#.getSortValueFromCellData">getSortValueFromCellData</a></li><li data-type='method'><a href="module-Utils.html#.renderCell">renderCell</a></li><li data-type='method'><a href="module-Utils.html#.sortData">sortData</a></li><li data-type='method'><a href="module-Utils.html#.validateColumns">validateColumns</a></li><li data-type='method'><a href="module-Utils.html#~alreadySorted">alreadySorted</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Formatters.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module Formatters */
import * as d3 from 'd3-format';
import curry from 'lodash.curry';

// //////////////////////////////
// Utility Functions
// //////////////////////////////

/**
 * Returns null/undefined for null/undefined values,
 * otherwise it returns the result of a passed in formatter
 *
 * @param {Any} value value to format
 * @param {Function} formatter formatter function
 * @return Formatted value or null/undefined
 */
export function safeFormat(value, formatter) {
  if (value == null || isNaN(value)) {
    return value;
  }

  return formatter(value);
}

/**
 * Wraps a formatter function that replaces the value with null
 * when it is 0. Useful for not rendering zeroes in tables.
 *
 * @param {Function} formatter formatter function
 * @return {Function} a formatter function
 */
export function zeroAsNull(formatter) {
  return function zeroAsNullWrapped(value) {
    return formatter(value === 0 ? null : value);
  };
}

/**
 * Wraps a formatting function and puts a + in front of formatted value
 * if it is positive.
 *
 * @param {Function} formatter formatter function
 * @return {Function} a formatter function
 */
export function makePlusMinus(formatter) {
  return function plusMinusWrapped(value) {
    if (value != null &amp;&amp; value > 0) {
      return `+${formatter(value)}`;
    }

    return formatter(value);
  };
}

/**
 * Wraps a formatting function by multiplying the value by 100 and
 * adds a % to the end.
 *
 * @param {Function} formatter formatter function
 * @return {Function} a formatter function
 */
export function makePercent(formatter) {
  return function percentWrapped(value) {
    if (value != null) {
      return `${formatter(value * 100)}%`;
    }

    return formatter(value);
  };
}


// //////////////////////////////
// Formatters
// //////////////////////////////

/**
 * Formatter (curried) - renders to `numDecimals` decimal places
 *
 * @example
 * decFormat(1, 10.89321)
 * > '10.9'
 *
 * @example
 * decFormat(2, 10.89321)
 * > '10.89'
 *
 * @example
 * decFormat(1)(10.89321)
 * > '10.9'
 *
 * @function
 * @param {Number} numDecimals number of decimals to use
 * @param {Number} value value to format
 * @return {String} formatted value
 */
export const decFormat = curry((numDecimals, value) =>
  safeFormat(value, d3.format(`0.${numDecimals}f`))
);

/**
 * Formatter (curried) - renders value multiplied by 100
 * with `numDecimal` decimal points.
 * Commonly used for percentages without the %.
 *
 * @example
 * decPercentFormat(1, 0.8132)
 * > '81.3'
 *
 * @function
 * @param {Number} numDecimals number of decimals to use
 * @param {Number} value value to format
 * @return {String} formatted value
 */
export const decPercentFormat = curry((numDecimals, value) =>
  safeFormat(value * 100, d3.format(`0.${numDecimals}f`))
);

/**
 * Formatter - renders value with at most one decimal point
 *
 * @example
 * atMostDecFormat(10.89321)
 * > '10.9'
 *
 * @example
 * atMostDecFormat(15)
 * > '15'
 *
 * @example
 * atMostDecFormat(15.001)
 * > '15.0'
 *
 * @param {Number} value value to format
 * @return {String} formatted value
 */
export function atMostDecFormat(value) {
  if (Number.isInteger(value)) {
    return value;
  }

  return decFormat(1, value);
}

/**
 * Formatter (curried) - renders value as a percentage
 *
 * @example
 * percentFormat(1, 0.38523)
 * > '38.5%'
 *
 * @function
 * @param {Number} numDecimals number of decimals to use
 * @param {Number} value value to format
 * @return {String} formatted value
 */
export const percentFormat = curry((numDecimals, value) =>
  safeFormat(value, d3.format(`0.${numDecimals}%`))
);

/**
 * Formatter (curried) - renders positive values with a +
 * and negative with a -.
 *
 * @example
 * plusMinusFormat(1, 0.38523)
 * > '+0.4'
 *
 * @example
 * plusMinusFormat(1, -15)
 * > '-15.0'
 *
 * @function
 * @param {Number} numDecimals number of decimals to use
 * @param {Number} value value to format
 * @return {String} formatted value
 */
export const plusMinusFormat = curry((numDecimals, value) =>
  safeFormat(value, d3.format(`+0.${numDecimals}f`))
);

/**
 * Formatter (curried) - renders values prefixed with a ±
 *
 * @example
 * seFormat(1, 0.38523)
 * > '±0.4'
 *
 * @example
 * seFormat(2, -15)
 * > '±15.00'
 *
 * @function
 * @param {Number} numDecimals number of decimals to use
 * @param {Number} value value to format
 * @return {String} formatted value
 */
export const seFormat = curry((numDecimals, value) =>
  safeFormat(value, x => `±${d3.format(`0.${numDecimals}f`)(Math.abs(x))}`)
);

/**
 * Formatter - adds leading zeroes to a value
 * (adds max of 8 zeros)
 *
 * @example
 * leadingZeroFormat(5, 2)
 * > '05'
 *
 * @example
 * leadingZeroFormat(12, 2)
 * > '12'
 *
 * @param {Number} length desired length of string
 * @param {Number} value value to format
 * @return {String} formatted value
 */
export const leadingZeroFormat = curry((length, value) =>
  `00000000${value}`.slice(-length)
);

/**
 * Formatter - renders values formatted as money (prefixed with $, uses commas)
 *
 * @example
 * moneyFormat(9.132)
 * > '$9.13'
 *
 * @param {Number} value value to format
 * @return {String} formatted value
 */
export function moneyFormat(value) {
  return safeFormat(value, d3.format('$,.2f'));
}

/**
 * Formatter - renders values formatted as with thousands separated with commas
 * (or whatever your locale uses as by d3.format(','))
 *
 * @example
 * commaFormat(1396512)
 * > '1,396,521'
 *
 * @param {Number} value value to format
 * @return {String} formatted value
 */
export function commaFormat(value) {
  return safeFormat(value, d3.format(','));
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
